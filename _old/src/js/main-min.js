function getpar(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var s=e[n].split("=");if(s[0]==t&&null==s[1])return!0;if(s[0]==t)return s[1]}return!1}if(getpar("p"))settings={par:"p"};else if(getpar("url"))var settings={par:"url"};else if(getpar("page"))var settings={par:"page"};else window.location.search="?page=home";let t="/";var comment,config,mdcontent;for(let e of window.location.pathname.split("/").slice(1,-1))t=t+e+"/";settings.domain=window.location.protocol+"//"+window.location.host+t,fetch("config.json").then(t=>{if(t.status>=200&&t.status<300)return t;document.all[0].innerHTML="<h1>Error fetch config.json<br>Status Code="+t.status+"</h1>",console.log(t.status)}).then(t=>t.json()).then((function(t){for(i in config=t,settings.themeUrl=settings.domain+config.file.theme+config.theme+"/",settings.post=settings.domain+config.file.post,config.comment.config)comment=config.comment.config[i]})).then((function(){"url"===settings.par?(settings.content={url:decodeURIComponent(getpar(settings.par))},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>(settings.content.preview={response:t},settings.content.preview.mdcontent=marked(t),marked(t))).then(t=>{fetch(settings.themeUrl+"html/200.html").then(t=>t.text()).then((function(t){settings.content.success=!0,document.write(t)}))}).catch((function(t){return settings.content.preview.mdcontent=t.message,document.write(t.message),t.message}))):"p"===settings.par?(settings.content={url:decodeURIComponent(settings.post+getpar(settings.par)+".md")},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>(settings.content.preview={response:t},settings.content.preview.mdcontent=marked(t),marked(t))).then(t=>{fetch(settings.themeUrl+"html/200.html").then(t=>t.text()).then((function(t){settings.content.success=!0,document.write(t)}))}).catch((function(t){return settings.content.preview.mdcontent=t.message,document.write(t.message),t.message}))):"page"===settings.par&&(settings.content={url:settings.themeUrl+"html/"+getpar(settings.par)+".html"},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>{settings.content.success=!0,settings.content.preview={response:t},document.write(t)}))})),console.log(settings);